<!doctype><html><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Odyssey.js Slides</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/x-icon" href="http://cartodb.github.io/odyssey.js/sandbox/favicon.png">
  <link rel="icon" type="image/png" href="http://cartodb.github.io/odyssey.js/sandbox/favicon.png">

  <link rel="stylesheet" href="http://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/themes/css/cartodb.css">
  <link rel="stylesheet" href="http://cartodb.github.io/odyssey.js/sandbox/css/slides.css">
  <script src="http://cartodb.github.io/odyssey.js/vendor/modernizr-2.6.2.min.js"></script>

  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

  <link href='https://fonts.googleapis.com/css?family=Roboto:400,900,700,500,300' rel='stylesheet' type='text/css'>


  <style>
    .myIcon {
      display: block;
      height: 70px;
      width: 70px;
      background-color: rgba(0,0,0,0);
      border: 2px solid white;
      box-shadow: inset 0px 0px 20px 0px rgba(157, 0, 230, 1), 0px 0px 5px 0px white; /*0, 183, 255*/ 
      border-radius: 50%;
    }
  
    #mainbox {
      left: 0px;
      position: absolute;
      top: 615px;
      width: 650px;
    }
    
    .boxes {
      position: relative;
      display: inline-block;
      padding: 12px;
      margin: 10px;
      background-color: white;
      line-height: 24px;
      border: 2px solid #0074A1;
      text-align: center;
      cursor: pointer;
      color: #0074A1;
      font-size: 24px;
      font-weight: 700;
    }
    .activebox {
      color: white;
      background-color: #0074A1;
      border: 2px solid white;
    }
    #slides_container {
      top: 20px;
      left: 20px;
      padding-left: 20px !important;
      padding-top: 15px !important;
      padding-bottom: 0px !important;
      padding-right: 5px !important;
      display: block !important;
      border: 2px solid #0074A1;
      width: 600px;
      height: 600px;
    }
    div {
      font-family: 'Roboto', sans-serif;
    }
    .next {
      color: #0074A1;
    }
    #slide_title {
      background-color: #0074A1;
      color: white;
      font-size: 28px;
      font-weight: 700;
      line-height: 30px;
      left:0;
      top:0;
      transform: translate(-20px, -16px);
      width:100%;
      padding: 16px;
      padding-right: 10px;
    }
    #slides, .slide.selected.selected_slide, .slide.selected.selected_slide.scrolled {
      height: 490px !important;
    }
    
    #slides_container h1,#slides_container h2,#slides_container h3,#slides_container h4,#slides_container h5,#slides_container h6 {
      font-family:'Proxima N W01 Bold', Sans-serif;
      color:#333;
      font-size:34px;
      margin-top: 5px;
    }
    
    #slides_container h1:after,#slides_container h2:after,#slides_container h3:after,#slides_container h4:after,#slides_container h5:after,#slides_container h6:after{
      display:block;
      margin:10px 0 0 0;
      height:3px;
      content:" ";
      text-shadow:none;
      background-color:#333;
      width:140px;
    }
    
    #dots li a:before{
      font-size: 28px;
    }
    #dots li a {
      opacity:0.3;
      color:#0074A1;
    }
    #dots li a.active {
      opacity:1;
    }
    a.next{
      background-position: center;
    }
    img {
      display:block;
      margin: 10px 0;
      width: 100%;
    }
    
    #slides_container .slide.scrolled img {
      display:block;
      margin:10px 0;
      width:100%
      
    }
    
    .photocredit {
      font-size: 8px;
    }
    
    /*div#credits span {*/
    /*  font-size: 10px !important;*/
    /*  line-height: 26px !important;*/
    /*  padding: 0px 0 0 0 !important;*/
    /*}*/
     
  </style>

</head>
<body>
  <div id="map" style="width: 100%; height: 100%;"></div>

  <div id="slides_container" style="display:block;">

    <div id="slide_title">TOP 5 WILDLIFE VIEWING SPOTS</div>

    <div id="slides"></div>
    <div style="right: 10px; position: relative; top: 10px; float: right; width: 200px; height: 20px;">

      <div id="dots" style="float: left; display: inline-block;"></div>

      <ul id="navButtons" style="margin-top: 0px; float: right; display: inline-block;">
        <li><a class="prev"></a></li>
        <li><a class="next"></a></li>
      </ul>
    </div>

    <div id="mainbox">  
      <button id="wildlife_box" class="boxes activebox">WILDLIFE</button>
      <button id="wildlands_box" class="boxes">WILDLANDS</button>
      <button id="bike-rides_box" class="boxes">BIKE RIDES</button>
    </div>

  </div>


  <div id="credits">
    <span class="title" id="title">Title</span>
    <span class="author"><strong id="author">By Name using</strong> <a href="http://cartodb.github.io/odyssey.js/">Odyssey.js</a><span>
  </span></span></div>

  <script src="http://cartodb-libs.global.ssl.fastly.net/cartodb.js/v3/cartodb.js"></script>
  <script src="Odyssey_GIN.js" charset="UTF-8"></script>
  <!-- <script src="http://cartodb.github.io/odyssey.js/dist/odyssey.js" charset="UTF-8"></script> -->

  <script>
    //highlight icon - highlights each marker
    var myIcon = L.divIcon({
      className: 'myIcon',
      iconSize: [70,70], 
      iconAnchor: [37,29]
    });
  
    var docwidth = $( document ).width();
    var docheight = $( document ).height();
    var winwidth = $(window).width();
    var winheight = $(window).height();  
    
    console.log('Docwidth is ' + docwidth + '     docheight is ' + docheight + '     winwidth is ' + winwidth  + '     winheight is ' + winheight);
    
    function changeSize(){
      if (winwidth > 1900 && winheight > 900) {
        $('#mainbox').css('top', '745px');
        $('.boxes').css('padding', '15px');
        $('.boxes').css('line-height', '24px');
        $('.boxes').css('font-size', '24px');
        $('#slides_container').css('height', '720px');
        $('#slides_container').css('top', '40px');
        $('#slides_container').css('left', '40px');
        $('#slides, .slide.selected.selected_slide, .slide.selected.selected_slide.scrolled').css('height', '600px');
      }
      else if (winwidth <= 1024 && winheight <=768){
        $('#slides_container').css('width', '550px');
      }
      else {}
    }
      
    changeSize();
    
    $(document).on('click', 'a', function(e){ 
        e.preventDefault(); 
        var url = $(this).attr('href'); 
        window.open(url, '_blank');
    });
    
      // else if (winwidth == 1024 AND winheight == 768) {
      //   $('#slides_container').css('width', '600px');
      // }
      // else {}
    
    

    // var fontrate = Math.round(docwidth/1920);
    // $('.boxes').css('font-size', String(fontrate*24) + 'px');
    // $('.boxes').css('padding', String(fontrate*20) + 'px'); 
  
    
    // window.onresize = function() {
    //   var doc_w = $( document ).width();
    //   var doc_h = $( document ).height();
    //   var win_w = $(window).width();
    //   var win_h = $(window).height();
    //   var rate = Math.round(doc_w/docwidth);
    //   console.log('Docwidth is ' + doc_w + '     docheight is ' + doc_h + '     winwidth is ' + win_w  + '     winheight is ' + win_h);
    //   $('#slides_container').css('width', 0.4*win_w); //0.3125
    //   $('#slides_container').css('height', 0.7265*win_h);
    //   $('#mainbox').css('top', 0.7265*win_h + 60);
      
    //   $('.boxes').css('font-size', String(rate*24) + 'px');
    //   $('.boxes').css('padding', String(rate*20) + 'px');      
    // }
    
    
    var resizePID;
    function clearResize() {
      clearTimeout(resizePID);
      resizePID = setTimeout(function() { adjustSlides(); }, 100);
    }
    if (!window.addEventListener) {
      window.attachEvent("resize", function load(event) {
        clearResize();
      });
    } else {
      window.addEventListener("resize", function load(event) {
        clearResize();
      });
    }
    function adjustSlides() {
      var container = document.getElementById("slides_container"),
          slide = document.querySelectorAll('.selected_slide')[0];
      if (slide) {
        if (slide.offsetHeight+169+40+80 >= window.innerHeight) {
          container.style.bottom = "80px";
          var h = container.offsetHeight;
          slide.style.height = h-169+"px";
          slide.classList.add("scrolled");
        } else {
          container.style.bottom = "auto";
          container.style.minHeight = "0";
          slide.style.height = "auto";
          slide.classList.remove("scrolled");
        }
      }
    }
    var resizeAction = O.Action(function() {
      function imageLoaded() {
        counter--;
        if (counter === 0) {
          adjustSlides();
        }
      }
      var images = $('img');
      var counter = images.length;
      images.each(function() {
        if (this.complete) {
          imageLoaded.call( this );
        } else {
          $(this).one('load', imageLoaded);
        }
      });
    });
    function click(el) {
      var element = O.Core.getElement(el);
      var t = O.Trigger();
      // TODO: clean properly
      function click() {
        t.trigger();
      }
      if (element) element.onclick = click;
      return t;
    }
    O.Template({
      init: function() {
        var seq = O.Triggers.Sequential();
        var baseurl = this.baseurl = 'http://{s}.api.cartocdn.com/base-light/{z}/{x}/{y}.png';
        var map = this.map = L.map('map', {zoomControl: false}).setView([0, 0.0], 4);
        var basemap = this.basemap = L.tileLayer(baseurl, {
          attribution: 'data OSM - map CartoDB'
        }).addTo(map);
        // enable keys to move
        O.Keys().on('map').left().then(seq.prev, seq)
        O.Keys().on('map').right().then(seq.next, seq)
        click(document.querySelectorAll('.next')).then(seq.next, seq)
        click(document.querySelectorAll('.prev')).then(seq.prev, seq)
        var slides = O.Actions.Slides('slides');
        var story = O.Story()
        this.story = story;
        this.seq = seq;
        this.slides = slides;
        this.progress = O.UI.DotProgress('dots').count(0);
        //added by DKD at GreenInfo: When clicking on one of the boxes under the story panel, 
        //seq.current(0) sets the story slide to the first one
        $('#wildlands_box').click(function(){
          seq.current(0);
        });
        $('#bike-rides_box').click(function(){
          seq.current(0);
        });
        $('#wildlife_box').click(function(){
          seq.current(0);
        });
        $('a').attr('target', '_blank');
        
        L.control.zoom({position: 'topright'}).addTo(map);
        
        // var elements = document.getElementsByTagName("a");
        // for (var i = 0; i < elements.length; i++) {
        //   if (elements[i].innerHTML == 'Photo Credit') {
        //     elements[i].className = "photocredit";
        //   }
        //   else {}
        // }
      },
      update: function(actions) {
        var self = this;
        if (!actions.length) return;
        this.story.clear();
        if (this.baseurl && (this.baseurl !== actions.global.baseurl)) {
          this.baseurl = actions.global.baseurl || 'http://0.api.cartocdn.com/base-light/{z}/{x}/{y}.png';
          this.basemap.setUrl(this.baseurl);
        }
        if (this.cartoDBLayer && ("http://"+self.cartoDBLayer.options.user_name+".cartodb.com/api/v2/viz/"+self.cartoDBLayer.options.layer_definition.stat_tag+"/viz.json" !== actions.global.vizjson)) {
          this.map.removeLayer(this.cartoDBLayer);
          this.cartoDBLayer = null;
          this.created = false;
        }
        if (actions.global.vizjson && !this.cartoDBLayer) {
          if (!this.created) { // sendCode debounce < vis loader
            cdb.vis.Loader.get(actions.global.vizjson, function(vizjson) {
              self.map.fitBounds(vizjson.bounds);
              cartodb.createLayer(self.map, vizjson)
                .done(function(layer) {
                  self.cartoDBLayer = layer;
                  var sublayer = layer.getSubLayer(0),
                      layer_name = layer.layers[0].options.layer_name,
                      filter = actions.global.cartodb_filter ? " WHERE "+actions.global.cartodb_filter : "";
                  // sublayer.setSQL("SELECT * FROM "+layer_name+filter)
                  self.map.addLayer(layer);
                  self._resetActions(actions);
                }).on('error', function(err) {
                  console.log("some error occurred: " + err);
                });
            });
            this.created = true;
          }
          return;
        }
        this._resetActions(actions);
      },
      _resetActions: function(actions) {
        // update footer title and author
        var title_ = actions.global.title === undefined ? '' : actions.global.title,
            author_ = actions.global.author === undefined ? 'Using' : 'By '+actions.global.author+' using';
        document.getElementById('title').innerHTML = title_;
        document.getElementById('author').innerHTML = author_;
        document.title = title_ + " | " + author_ +' Odyssey.js';
        var sl = actions;
        document.getElementById('slides').innerHTML = ''
        this.progress.count(sl.length);
        // create new story
        for(var i = 0; i < sl.length; ++i) {
          var slide = sl[i];
          var tmpl = "<div class='slide' style='diplay:none'>";
          tmpl += slide.html();
          tmpl += "</div>";
          document.getElementById('slides').innerHTML += tmpl;
          this.progress.step(i).then(this.seq.step(i), this.seq)
          var actions = O.Parallel(
            this.slides.activate(i),
            slide(this),
            this.progress.activate(i),
            resizeAction
          );
          actions.on("finish.app", function() {
            adjustSlides();
          });
          this.story.addState(
            this.seq.step(i),
            actions
          )
        }
        this.story.go(this.seq.current());
      },
      changeSlide: function(n) {
        this.seq.current(n);
      },
    });
    
    //activate .boxes active css style
    $('.boxes').click(function(){
        $('.boxes').removeClass('activebox');
        $(this).addClass('activebox');
    });
    
    var elements = document.getElementsByTagName("a");
    for (var i = 0; i < elements.length; i++) {
      console.log(elements[i].innerHTML);
      if (elements[i].innerHTML == 'Photo Credit') {
        elements[i].className = "photocredit";
      }
      else {}
    }
    
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-20934186-21', 'cartodb.github.io');
    ga('send', 'pageview');
  </script>

  <script type="text/javascript" src="http://fast.fonts.net/jsapi/3af16084-ba56-49ca-b37d-0b49b59e1927.js"></script>

<script type="text/template" id="md_template1">
```
-baseurl: "http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg"
-title: "WILDLIFE"
-author: "SF Nature Mapping Project"
-vizjson: "https://sfnaturemaps.cartodb.com/api/v2/viz/cf171ec2-da8a-11e5-9b00-0e787de82d45/viz.json"
-center: [37.761745, -122.494242]
-zoom: 14
```

#Pier 39 - Sea Lions
```
L.marker([37.8110, -122.4107],{icon: myIcon}).bindPopup('<a href="https://www.google.com/maps/dir//PIER+39,+Beach+Street+%26+The+Embarcadero,+San+Francisco,+CA+94133/@37.8087356,-122.4448404,13z/data=!3m1!4b1!4m8!4m7!1m0!1m5!1m1!1s0x808580fc8bb3211d:0xbaf631600de6b39e!2m2!1d-122.409821!2d37.808673">Test</a>').actions.addRemove(S.map)
```
![Sea Lions](images/sealions.png)
Pier 39 is not just for tourists shivering in Bermuda shorts. It’s also been home to sea lions since the early 1990s, when they began hauling out onto the dock and turning the surrounding pier into a prime wildlife watching spot. The sea lions, protected under the Marine Mammal Protection Act, can still be seen today sunning on the pier.  A few are here year-round, but best time to visit is late July to mid-May. [Read more.](http://www.pier39.com/home/the-sea-lion-story/sea-lion-qa/)


#Botanical Garden - Birds
```
L.marker([37.7684, -122.4718],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
- center: [37.769259, -122.485524]
```
![Swallowtail](images\swallowtail.png)
Plants aren’t the only attraction at the 55-acre San Francisco Botanical Garden in Golden Gate Park. Turns out that a garden with 8,000 kinds of plants also attracts a crazy variety of birds! And with lots of nearby parking, easy paths, benches, and bathrooms, this might be the most kid-friendly birding spot anywhere.

#Strawberry Hill/Stow Lake- Butterflies
```
L.marker([37.7698, -122.4667],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
- center: [37.769259, -122.485524]
```
Swallowtail butterflies are big and beautiful! Strawberry Hill -- really an island on Stow Lake -- is great swallowtail butterfly habitats. While you’re out butterfly spotting, check out the hill’s trails, waterfall, picnic sites, and incredible views. Strawberry Hill is a perfect escape into nature right in Golden Gate Park.

#Land's End/Sutro Heights - Birds
```
L.marker([37.7850, -122.5096],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
The cliffs of Land’s End are amazing all year, but fall is the time to come here often and watch for migrating birds especially hawks! On the far northwest edge of the peninsula, San Francisco’s Sutro Heights Park and Land’s End offer trails, rugged terrain, and great ocean views. 

#Heron's Head Park - Birds
```
L.marker([37.7380, -122.3729],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
This 22-acre park near Hunter’s Point is a great place to see all kinds of seabirds, cool marshes, and big ships going by in the bay. Learn more about the wildlife in the park at the Heron’s Head Park EcoCenter, or walk south along the shore to a playground at India Basin Shoreline Park.


</script>

<script type="text/template" id="md_template2">
```
-baseurl: "http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg"
-title: "WILDLANDS"
-author: "SF Nature Mapping Project"
-vizjson: "https://sfnaturemaps.cartodb.com/api/v2/viz/cf171ec2-da8a-11e5-9b00-0e787de82d45/viz.json"
-center: [37.761745, -122.494242]
-zoom: 14
```

#Crissy Field
```
L.marker([37.8110, -122.4107],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
With the Golden Gate Bridge looming overhead and the wild bay at your feet, you can’t go wrong at Crissy Field. Build a sandcastle, play on the grass, bring a picnic, watch windsurfers go by, and definitely keep an eye out for porpoises and dolphins!

#Land's End
```
L.marker([37.7684, -122.4718],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
NO INFO YET 

#Glen Canyon
```
L.marker([37.7698, -122.4667],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Glen Canyon Park is a sprawling urban canyon with walking and hiking trails that offer views of wildlife, geologic formations, springtime wildflowers, and plenty of jolly dogs. The 3.7 miles of trails through the canyon offer something for everyone, from leisurely walks to challenging hikes. The park is also home to Islais Creek, the largest remaining free-flowing creek in the city.

#Corona Heights
```
L.marker([37.7850, -122.5096],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Corona Heights Park in the Castro boasts some of the best views in city. Hike up to the top and keep an eye out for cool rock formations, wildflowers, and callippe silverspot butterflies. In fall 2016, the Randall Museum will reopen, cementing this hill’s reputation as one of the top family destinations in the city.


#Twin Peaks
```
L.marker([37.7380, -122.3729],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Most visitors enjoy Twin Peaks’ stunning views from the north peak parking lot, but don’t miss the chance to hike up the 0.7 mile trail network to the very top, where you can find 360-degree views of the San Francisco Bay area. The park, nested in grassland and coastal scrub habitats, also offers glimpses of the occasional coyote and mission blue butterfly. 



</script>  

<script type="text/template" id="md_template3">
```
-baseurl: "http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg"
-title: "BIKE RIDES"
-author: "SF Nature Mapping Project"
-vizjson: "https://sfnaturemaps.cartodb.com/api/v2/viz/cf171ec2-da8a-11e5-9b00-0e787de82d45/viz.json"
-center: [37.761745, -122.494242]
-zoom: 14
```

#Golden Gate Park - Sundays
```
L.marker([37.8110, -122.4107],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Though Golden Gate Park is open to bicyclists all days of the week, on Sundays and holidays the park’s main entrance on John F Kennedy Drive is closed to vehicles. That’s a great day to hit the park with your kids for safe pedalling among other bikers, runners, and rollerbladers. 

#Ocean Beach - Anytime
```
L.marker([37.7684, -122.4718],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Ocean Beach, on the far western edge of the city, is often a good place to get sandblasted by a cold wind. But when the sun shines and the coast is warm, this 3.5-mile beach is paradise for biking, strolling, jogging, and kite-flying. 

#Lake Merced - Anytime
```
L.marker([37.7698, -122.4667],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Lake Merced, in southwest San Francisco, is a large freshwater lake popular with hikers, cyclists, boaters, and nature lovers. The park features paved trails, a fishing pier and boathouse, and several picnic areas.

#Marina Green/Crissy Field - Weekdays
```
L.marker([37.7850, -122.5096],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Crissy Field offers a wide array of activities for outdoor enthusiasts and nature lovers. With trails, picnic areas, beaches, and open green spaces, this 100-acre park in the Presidio is a great place to spend a day outside. Don’t miss the San Francisco Bay Trail, where visitors can bike, stroll, or jog with views of the Golden Gate Bridge. On weekends the paths become more crowded with a lot of fast bikes whizzing by.

#Panhandle - Weekends
```
L.marker([37.7380, -122.3729],{icon: myIcon}).bindPopup('<a href="http://www.google.com">Test</a>').actions.addRemove(S.map)
```
Next to Golden Gate Park, this peninsula park offers a meandering bike path underneath magnificent hardwood trees. While bikers can whiz by during commute times, the park offers some concrete oases to wait for them to pass and for beginners to practice their biking skills.


</script>

</body></html>
